// Generated by CoffeeScript 1.10.0
(function() {
  var dbconfig, mysql, pool;

  mysql = require('mysql');

  dbconfig = require('./dbconfig').config;

  pool = mysql.createPool(dbconfig);

  exports.release = function(conn) {
    return conn.end(function(err) {
      return console.log('conn is closed!');
    });
  };

  exports.query = function(options) {
    return pool.getConnection(function(err, conn) {
      var args, handler, q, sql;
      if (err) {
        console.log('connect err@!');
        throw err;
      }
      sql = options.sql;
      args = options.args;
      handler = options.handler;
      if (!args) {
        q = conn.query(sql, function(err, res) {
          if (err) {
            console.log('err');
            throw err;
          }
          return handler(res);
        });
        console.log(q.sql);
      }
    });
  };

}).call(this);
